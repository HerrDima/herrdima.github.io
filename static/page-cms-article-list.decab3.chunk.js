"use strict";(self.webpackChunkmin_svenska=self.webpackChunkmin_svenska||[]).push([[132],{3145:(e,t,r)=>{r.d(t,{x:()=>a});var n=r(5893);function i(e){if("number"==typeof e)return[e,e,e,e];if(!Array.isArray(e))return[0,0,0,0];switch(e.length){case 0:return[0,0,0,0];case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return[e[0],e[1],e[2],e[3]];default:return console.error("makeCssArray: too big array"),[e[0],e[1],e[2],e[3]]}}function a(e){const{tagName:t="div",children:r,margin:a,padding:d,width:o,height:s,boxSizing:l,backgroundColor:u,display:c}=e,[g,h,f,p,m,w,y,x]=[...i(a),...i(d)].map((e=>`${e}px`)),S={backgroundColor:u,boxSizing:l,display:c,height:s,marginBottom:f,marginLeft:p,marginRight:h,marginTop:g,paddingBottom:y,paddingLeft:x,paddingRight:w,paddingTop:m,width:o};return(0,n.jsx)(t,{style:S,children:r})}},930:(e,t,r)=>{r.d(t,{CmsArticleList:()=>C});var n,i=r(5893),a=r(7294),d=r(2124),o=r(6986),s=r(6464),l=r(3890),u=r(6333),c=r(7794),g=r(2787),h=r(6570),f=r(9655),p=r(5071),m=r(3791),w=r(7116),y=r(9438),x=r(881);function S(e){const{setSearchedColumn:t,setSearchText:r}=e;return[{dataIndex:"title",defaultSortOrder:n.ascend,filterDropdown:e=>{const{visible:n}=e,d=(0,a.useRef)(null);return(0,a.useEffect)((()=>{n&&setTimeout((()=>{var e;null===(e=d.current)||void 0===e||e.focus({cursor:"start"})}),100)}),[n]),(0,i.jsx)(g.default,{onInput:e=>{t("title"),r(e.currentTarget.value.trim())},placeholder:"Search...",ref:d},"title")},filterIcon:(0,i.jsx)(h.Z,{}),key:"title",render:(e,t)=>(0,i.jsx)(f.Link,{to:(0,y._)(t.slug),children:e},t.id),sorter:()=>0,title:"Title"},{dataIndex:"slug",defaultSortOrder:null,filterDropdown:e=>{const{visible:n}=e,d=(0,a.useRef)(null);return(0,a.useEffect)((()=>{n&&setTimeout((()=>{var e;null===(e=d.current)||void 0===e||e.focus({cursor:"start"})}),100)}),[n]),(0,i.jsx)(g.default,{onInput:e=>{t("slug"),r(e.currentTarget.value)},placeholder:"Search...",ref:d},"slug")},filterIcon:(0,i.jsx)(h.Z,{}),key:"slug",render:(e,t)=>(0,i.jsx)(f.Link,{to:(0,p.j9)(t.id),children:e},t.id),sorter:()=>0,title:"Slug/edit"},{dataIndex:"articleType",defaultSortOrder:null,key:"articleType",sorter:()=>0,title:"Type"},{align:"center",dataIndex:"isActive",defaultSortOrder:null,key:"isActive",render:e=>(0,m.pA)(e),sorter:()=>0,title:"Is active"},{align:"center",dataIndex:"titleImage",defaultSortOrder:null,key:"titleImage",render:e=>(0,i.jsx)("img",{alt:e.name,height:"64px",src:(0,x.s)(e.name,{height:64,width:64}),style:{objectFit:"contain"},width:"64px"}),sorter:()=>0,title:"Image"},{align:"right",dataIndex:"createdDate",defaultSortOrder:null,key:"createdDate",render:w.aS,sorter:()=>0,title:"Created UTC-0",width:120},{align:"right",dataIndex:"updatedDate",defaultSortOrder:null,key:"updatedDate",render:w.aS,sorter:()=>0,title:"Updated UTC-0",width:120},{align:"right",dataIndex:"publishDate",defaultSortOrder:null,key:"publishDate",render:w.aS,sorter:()=>0,title:"Publish UTC-0",width:120}]}!function(e){e.ascend="ascend",e.descend="descend"}(n||(n={}));const v=["articleType","createdDate","id","isActive","publishDate","slug","title","titleImage","updatedDate"],{Title:T}=d.default;function C(){const[e,t]=(0,a.useState)("title"),[r,d]=(0,a.useState)(""),{execute:g,result:h,isInProgress:f}=(0,s.Od)(l.Qy),[p,m]=(0,a.useState)({pageConfig:{pageIndex:0,pageSize:10,sort:{title:1}},query:{}});return(0,a.useEffect)((()=>{g(p.query,p.pageConfig,v)}),[g,p]),(0,a.useEffect)((()=>{m((t=>{const i=String({...t.pageConfig.sort}[String(e)])===n.descend?-1:1,{pageSize:a}=t.pageConfig;return{pageConfig:{pageIndex:0,pageSize:a,sort:{[String(e)]:i}},query:{[e]:(0,c.ro)(r,"i").toString()}}}))}),[e,r]),(0,i.jsxs)(u.Q,{children:[(0,i.jsx)(T,{level:2,children:"Article list"}),(0,i.jsx)(o.Z,{columns:S({setSearchText:d,setSearchedColumn:t}),dataSource:(null==h?void 0:h.list)||[],loading:f,onChange:function(t,i,a,d){const o=Array.isArray(a)?a[0]:a;if(!o)return void console.warn("handleTableChange - NO firstSorter");const{column:s,order:l,field:u,columnKey:g}=o,h=l===n.descend?-1:1,f=(t.current||1)-1,p=t.pageSize||10;m((()=>({pageConfig:{pageIndex:f,pageSize:p,sort:{[String(u)]:h}},query:{[e]:(0,c.ro)(r,"i").toString()}})))},pagination:{current:p.pageConfig.pageIndex+1,defaultPageSize:10,hideOnSinglePage:!1,pageSize:p.pageConfig.pageSize,pageSizeOptions:[10,50,100,500,1e3,2e3,5e3],showSizeChanger:!0,total:(null==h?void 0:h.totalItemCount)||0},rowKey:"id"})]})}},1238:(e,t,r)=>{var n;r.d(t,{$t:()=>o,VJ:()=>i,WY:()=>s,dW:()=>n,hd:()=>a,uN:()=>d}),function(e){e.create="create",e.edit="edit"}(n||(n={}));const i=["id","slug","subDocumentIdList","title"],a="0000-00-00T00:00:00.000Z",d="image/png, image/jpeg, image/gif, image/webp",o=16e6,s=75e6},5071:(e,t,r)=>{r.d(t,{D6:()=>y,cT:()=>f,j9:()=>w,kA:()=>S,o3:()=>p,sB:()=>m,v8:()=>x});var n=r(9745),i=r(2703),a=r(8304),d=r(5220),o=r(6451),s=r(3890),l=r(5592),u=r(7644),c=r(1595),g=r(881),h=r(1238);async function f(e,t){const r=new FormData;if(e.size>=t)throw new Error(`Too big file, limit ${t/1e6}MB`);r.append("file",e);const n=await(0,o.w)(d.JW.adminFileUpload,(0,u.Dn)(),{body:r,credentials:"include",method:o.T.post}),i=(0,g.a)(n.name);switch(n.type){case l.iw.image:{const{naturalHeight:e,naturalWidth:t}=await function(e){const t=new Image;return new Promise(((r,n)=>{t.addEventListener("load",(()=>r(t)),!1),t.addEventListener("error",n,!1),t.src=e}))}(i);return{...n,height:e,width:t}}case l.iw.audio:{const{duration:e}=await function(e){const t=new Audio;return new Promise(((r,n)=>{t.addEventListener("loadedmetadata",(()=>r(t)),!1),t.addEventListener("error",n,!1),t.preload="metadata",t.src=e}))}(i);return{...n,duration:e}}case l.iw.video:{const{duration:e,videoWidth:t,videoHeight:r}=await function(e){const t=document.createElement("video");return new Promise(((r,n)=>{t.addEventListener("loadedmetadata",(()=>r(t)),!1),t.addEventListener("error",n,!1),t.preload="metadata",t.src=e}))}(i);return{...n,duration:e,height:r,width:t}}case l.iw.unknown:return n;default:throw new c.sF(n.type)}return n}function p(e){const{id:t,mode:r,savedArticleList:n}=e;return[{message:"Required!",required:!0},{message:"Please-enter-slug-properly.",validator:async(e,t)=>{if((0,i.Iu)(t)!==t)throw new Error("Slug is not formatted.")}},{message:"Please enter another slug. This slug already exists.",validator:async(e,i)=>{const a=n.filter((e=>e.slug===i)),d=a.length;if(0===d)return;if(d>=2)throw new Error("There are should be only one no non articles");const o=d>0;if(r===h.dW.create&&o)throw new Error("Use unique slug.");const[s]=a;if(r===h.dW.edit&&s.slug===i&&s.id!==t)throw new Error("Article with your slug already exists")}}]}function m(){return[{message:"Invalid HTML.",validator:async(e,t)=>{if("undefined"==typeof document)return;const r=document.createElement("div");if(r.innerHTML=t,r.innerHTML.trim()!==t.trim())throw new Error("HTML is not valid")}}]}function w(e){return(0,n.Gn)(a.$.articleEdit.path,{articleId:e})}function y(e){const t=function(e){return e.includes(".")?(e.split(".").pop()||"").toLowerCase():""}(e);return["jpg","jpeg","jfif","gif","png","webp"].includes(t)}function x(e,t){return 0===t.length?[]:e.filter((e=>!t.some((t=>t.id===e))))}function S(e){return(0,s.jX)(e).then((()=>location.reload())).catch(console.error)}},6333:(e,t,r)=>{r.d(t,{Q:()=>c});var n=r(5893),i=r(7183),a=r(8427),d=r(9250),o=r(9655),s=(r(8257),r(3145)),l=r(8304);const{Content:u}=i.default;function c(e){const{children:t}=e,r=(0,d.TH)();return(0,n.jsxs)(i.default,{children:[(0,n.jsx)(s.x,{padding:16,children:(0,n.jsx)(a.Z,{defaultSelectedKeys:[r.pathname],items:[{key:l.$.articleList.path,label:(0,n.jsx)(o.Link,{to:l.$.articleList.path,children:"List"})},{key:l.$.articleCreate.path,label:(0,n.jsx)(o.Link,{to:l.$.articleCreate.path,children:"Create"})},{key:l.$.articleTree.path,label:(0,n.jsx)(o.Link,{to:l.$.articleTree.path,children:"Tree"})}],mode:"horizontal"})}),(0,n.jsx)(s.x,{padding:16,children:(0,n.jsx)(u,{children:t})})]})}}}]);
//# sourceMappingURL=page-cms-article-list.decab3.chunk.js.map