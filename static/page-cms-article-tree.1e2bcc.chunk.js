"use strict";(self.webpackChunkmin_svenska=self.webpackChunkmin_svenska||[]).push([[702],{3145:(e,t,n)=>{n.d(t,{x:()=>a});var i=n(5893);function r(e){if("number"==typeof e)return[e,e,e,e];if(!Array.isArray(e))return[0,0,0,0];switch(e.length){case 0:return[0,0,0,0];case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return[e[0],e[1],e[2],e[3]];default:return console.error("makeCssArray: too big array"),[e[0],e[1],e[2],e[3]]}}function a(e){const{tagName:t="div",children:n,margin:a,padding:o,width:l,height:s,boxSizing:d,backgroundColor:c,display:m}=e,[g,p,u,h,f,$,x,y]=[...r(a),...r(o)].map((e=>`${e}px`)),v={backgroundColor:c,boxSizing:d,display:m,height:s,marginBottom:u,marginLeft:h,marginRight:p,marginTop:g,paddingBottom:x,paddingLeft:y,paddingRight:$,paddingTop:f,width:l};return(0,i.jsx)(t,{style:v,children:n})}},3662:(e,t,n)=>{n.d(t,{CmsArticleTree:()=>ee});var i=n(5893),r=n(7294),a=n(2124),o=n(3433),l=n(4184),s=n.n(l),d=n(8780),c=n(4443),m=n(3124),g=n(8258),p=n(2820),u=n(5378),h=n(1213),f=n(2507),$=n(6159),x=n(1584);const y=r.createContext({});y.Consumer;var v=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const b=(e,t)=>{var{prefixCls:n,children:i,actions:a,extra:o,className:l,colStyle:d}=e,c=v(e,["prefixCls","children","actions","extra","className","colStyle"]);const{grid:g,itemLayout:p}=(0,r.useContext)(y),{getPrefixCls:u}=(0,r.useContext)(m.E_),h=u("list",n),f=a&&a.length>0&&r.createElement("ul",{className:`${h}-item-action`,key:"actions"},a.map(((e,t)=>r.createElement("li",{key:`${h}-item-action-${t}`},e,t!==a.length-1&&r.createElement("em",{className:`${h}-item-action-split`}))))),b=g?"div":"li",S=r.createElement(b,Object.assign({},c,g?{}:{ref:t},{className:s()(`${h}-item`,{[`${h}-item-no-flex`]:!("vertical"===p?o:!(()=>{let e;return r.Children.forEach(i,(t=>{"string"==typeof t&&(e=!0)})),e&&r.Children.count(i)>1})())},l)}),"vertical"===p&&o?[r.createElement("div",{className:`${h}-item-main`,key:"content"},i,f),r.createElement("div",{className:`${h}-item-extra`,key:"extra"},o)]:[i,f,(0,$.Tm)(o,{key:"extra"})]);return g?r.createElement(x.Z,{ref:t,flex:1,style:d},S):S},S=(0,r.forwardRef)(b);S.Meta=e=>{var{prefixCls:t,className:n,avatar:i,title:a,description:o}=e,l=v(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:d}=(0,r.useContext)(m.E_),c=d("list",t),g=s()(`${c}-item-meta`,n),p=r.createElement("div",{className:`${c}-item-meta-content`},a&&r.createElement("h4",{className:`${c}-item-meta-title`},a),o&&r.createElement("div",{className:`${c}-item-meta-description`},o));return r.createElement("div",Object.assign({},l,{className:g}),i&&r.createElement("div",{className:`${c}-item-meta-avatar`},i),(a||o)&&p)};const j=S;var w=n(4747),k=n(7968),E=n(5503);const C=e=>{const{listBorderedCls:t,componentCls:n,paddingLG:i,margin:r,itemPaddingSM:a,itemPaddingLG:o,marginLG:l,borderRadiusLG:s}=e;return{[`${t}`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:s,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:i},[`${n}-pagination`]:{margin:`${r}px ${l}px`}},[`${t}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:a}},[`${t}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:o}}}},L=e=>{const{componentCls:t,screenSM:n,screenMD:i,marginLG:r,marginSM:a,margin:o}=e;return{[`@media screen and (max-width:${i})`]:{[`${t}`]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:r}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:r}}}},[`@media screen and (max-width: ${n})`]:{[`${t}`]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:a}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${o}px`}}}}}},T=e=>{const{componentCls:t,antCls:n,controlHeight:i,minHeight:r,paddingSM:a,marginLG:o,padding:l,itemPadding:s,colorPrimary:d,itemPaddingSM:c,itemPaddingLG:m,paddingXS:g,margin:p,colorText:u,colorTextDescription:h,motionDurationSlow:f,lineWidth:$,headerBg:x,footerBg:y,emptyTextPadding:v,metaMarginBottom:b,avatarMarginRight:S,titleMarginBottom:j,descriptionFontSize:k}=e,E={};return["start","center","end"].forEach((e=>{E[`&-align-${e}`]={textAlign:e}})),{[`${t}`]:Object.assign(Object.assign({},(0,w.Wf)(e)),{position:"relative","*":{outline:"none"},[`${t}-header`]:{background:x},[`${t}-footer`]:{background:y},[`${t}-header, ${t}-footer`]:{paddingBlock:a},[`${t}-pagination`]:Object.assign(Object.assign({marginBlockStart:o},E),{[`${n}-pagination-options`]:{textAlign:"start"}}),[`${t}-spin`]:{minHeight:r,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:s,color:u,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:S},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:u},[`${t}-item-meta-title`]:{margin:`0 0 ${e.marginXXS}px 0`,color:u,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:u,transition:`all ${f}`,"&:hover":{color:d}}},[`${t}-item-meta-description`]:{color:h,fontSize:k,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${g}px`,color:h,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:$,height:Math.ceil(e.fontSize*e.lineHeight)-2*e.marginXXS,transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${l}px 0`,color:h,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:v,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${n}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:p,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:o},[`${t}-item-meta`]:{marginBlockEnd:b,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:j,color:u,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:l,marginInlineStart:"auto","> li":{padding:`0 ${l}px`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:i},[`${t}-split${t}-something-after-last-item ${n}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:m},[`${t}-sm ${t}-item`]:{padding:c},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},I=(0,k.Z)("List",(e=>{const t=(0,E.TS)(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[T(t),C(t),L(t)]}),(e=>({contentWidth:220,itemPadding:`${e.paddingContentVertical}px 0`,itemPaddingSM:`${e.paddingContentVerticalSM}px ${e.paddingContentHorizontal}px`,itemPaddingLG:`${e.paddingContentVerticalLG}px ${e.paddingContentHorizontalLG}px`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize})));function z(e){var t,{pagination:n=!1,prefixCls:i,bordered:a=!1,split:l=!0,className:$,rootClassName:x,children:v,itemLayout:b,loadMore:S,grid:j,dataSource:w=[],size:k,header:E,footer:C,loading:L=!1,rowKey:T,renderItem:z,locale:O}=e,P=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["pagination","prefixCls","bordered","split","className","rootClassName","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const B=n&&"object"==typeof n?n:{},[M,N]=r.useState(B.defaultCurrent||1),[A,H]=r.useState(B.defaultPageSize||10),{getPrefixCls:W,renderEmpty:Z,direction:D}=r.useContext(m.E_),G=e=>(t,i)=>{N(t),H(i),n&&n[e]&&n[e](t,i)},R=G("onChange"),X=G("onShowSizeChange"),_=W("list",i),[F,V]=I(_);let q=L;"boolean"==typeof q&&(q={spinning:q});const J=q&&q.spinning;let K="";switch(k){case"large":K="lg";break;case"small":K="sm"}const Q=s()(_,{[`${_}-vertical`]:"vertical"===b,[`${_}-${K}`]:K,[`${_}-split`]:l,[`${_}-bordered`]:a,[`${_}-loading`]:J,[`${_}-grid`]:!!j,[`${_}-something-after-last-item`]:!!(S||n||C),[`${_}-rtl`]:"rtl"===D},$,x,V),U=(0,d.Z)({current:1,total:0},{total:w.length,current:M,pageSize:A},n||{}),Y=Math.ceil(U.total/U.pageSize);U.current>Y&&(U.current=Y);const ee=n?r.createElement("div",{className:s()(`${_}-pagination`,`${_}-pagination-align-${null!==(t=null==U?void 0:U.align)&&void 0!==t?t:"end"}`)},r.createElement(h.Z,Object.assign({},U,{onChange:R,onShowSizeChange:X}))):null;let te=(0,o.Z)(w);n&&w.length>(U.current-1)*U.pageSize&&(te=(0,o.Z)(w).splice((U.current-1)*U.pageSize,U.pageSize));const ne=Object.keys(j||{}).some((e=>["xs","sm","md","lg","xl","xxl"].includes(e))),ie=(0,u.Z)(ne),re=r.useMemo((()=>{for(let e=0;e<c.c.length;e+=1){const t=c.c[e];if(ie[t])return t}}),[ie]),ae=r.useMemo((()=>{if(!j)return;const e=re&&j[re]?j[re]:j.column;return e?{width:100/e+"%",maxWidth:100/e+"%"}:void 0}),[null==j?void 0:j.column,re]);let oe=J&&r.createElement("div",{style:{minHeight:53}});if(te.length>0){const e=te.map(((e,t)=>((e,t)=>{if(!z)return null;let n;return n="function"==typeof T?T(e):T?e[T]:e.key,n||(n=`list-item-${t}`),r.createElement(r.Fragment,{key:n},z(e,t))})(e,t)));oe=j?r.createElement(p.Z,{gutter:j.gutter},r.Children.map(e,(e=>r.createElement("div",{key:null==e?void 0:e.key,style:ae},e)))):r.createElement("ul",{className:`${_}-items`},e)}else v||J||(oe=r.createElement("div",{className:`${_}-empty-text`},O&&O.emptyText||(null==Z?void 0:Z("List"))||r.createElement(g.Z,{componentName:"List"})));const le=U.position||"bottom",se=r.useMemo((()=>({grid:j,itemLayout:b})),[JSON.stringify(j),b]);return F(r.createElement(y.Provider,{value:se},r.createElement("div",Object.assign({className:Q},P),("top"===le||"both"===le)&&ee,E&&r.createElement("div",{className:`${_}-header`},E),r.createElement(f.Z,Object.assign({},q),oe,v),C&&r.createElement("div",{className:`${_}-footer`},C),S||("bottom"===le||"both"===le)&&ee)))}z.Item=j;const O=z;var P=n(4604),B=n(5460),M=n(261),N=n(7254),A=n(9655),H=n(6333),W=n(6464),Z=n(3890),D=n(4188),G=n(3145),R=n(3791),X=n(5071),_=n(9438);const F=["articleType","id","isActive","slug","subDocumentIdList","title"];var V=n(4557);const{Text:q}=a.default;function J(e,t){return e.find((e=>e.id===t))||null}function K(e,t,n){if(0===n)return console.error("[ERROR]: populateChildren: limit exceeded"),[];const r=J(t,e);if(!r)return[];const{subDocumentIdList:a}=r;return a.map((e=>{const r=J(t,e),a=(0,X.j9)(e);if(!r)return{key:e,title:(0,i.jsx)(A.Link,{to:a,children:(0,i.jsxs)(q,{type:"danger",children:["[ERROR]: can NOT find article by id: ",e]})})};const{title:o,slug:l,isActive:s,articleType:d}=r,c=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(A.Link,{to:(0,_._)(l),children:o})," | ",(0,i.jsx)(A.Link,{to:a,children:l})," | ",(0,i.jsxs)(q,{children:[d," ",(0,R.pA)(s)]})]});return{children:K(e,t,n-1),key:e,title:c}}))}const{Title:Q,Text:U}=a.default,{Item:Y}=O;function ee(){const{execute:e,isInProgress:t}=(0,W.Od)(Z.Qy),[n,a]=(0,r.useState)([]);(0,r.useEffect)((()=>{e({},{pageIndex:0,pageSize:0,sort:{title:1}},F).then((e=>a(e.list))).catch((e=>{P.ZP.error("Can not fetch article list.")}))}),[e]);const o=(l=n,{children:K(V.Z,l,10),key:V.Z,title:(0,i.jsx)(A.Link,{to:(0,X.j9)(V.Z),children:V.Z})});var l;const s=function(e){return e.filter((t=>!e.some((e=>e.subDocumentIdList.includes(t.id)))))}(n),d=function(e){return e.filter((t=>{const{subDocumentIdList:n}=t;return n.some((t=>!J(e,t)))}))}(n),c=(0,r.useCallback)(((e,t)=>{const{title:n,slug:r,isActive:a,articleType:o,id:l}=e;return(0,i.jsxs)(Y,{children:[(0,i.jsxs)(U,{children:[t+1,". "]}),(0,i.jsx)(A.Link,{to:(0,_._)(r),children:n})," | ",(0,i.jsx)(A.Link,{to:(0,X.j9)(l),children:r})," | ",(0,i.jsxs)(U,{children:[o," ",(0,R.pA)(a)]})]})}),[]),m=(0,r.useCallback)(((e,t)=>{const{title:r,slug:a,isActive:o,articleType:l,id:s,subDocumentIdList:d}=e,c=d.filter((e=>!J(n,e))).join(", ");return(0,i.jsxs)(Y,{children:[(0,i.jsxs)(U,{children:[t+1,". "]}),(0,i.jsx)(A.Link,{to:(0,_._)(a),children:r})," | ",(0,i.jsx)(A.Link,{to:(0,X.j9)(s),children:a})," | ",(0,i.jsxs)(U,{children:[l," ",(0,R.pA)(o)]})," | ",(0,i.jsxs)(U,{type:"danger",children:["Ids: ",c]})]})}),[n]);return(0,i.jsxs)(H.Q,{children:[(0,i.jsx)(Q,{level:2,children:"Article tree"}),(0,i.jsxs)(B.Z,{orientation:"left",children:["Articles in a tree, total (include non-parents): ",n.length]}),(0,i.jsx)(M.Z,{autoExpandParent:!0,defaultExpandAll:!0,showLine:!0,switcherIcon:(0,i.jsx)(N.Z,{}),treeData:[o]}),(0,i.jsxs)(B.Z,{orientation:"left",children:["Articles without parent, total: ",s.length]}),(0,i.jsx)(G.x,{backgroundColor:"#fff",children:(0,i.jsx)(O,{bordered:!0,dataSource:s,renderItem:c})}),(0,i.jsxs)(B.Z,{orientation:"left",children:["Articles with lost children, total: ",d.length]}),(0,i.jsx)(G.x,{backgroundColor:"#fff",children:(0,i.jsx)(O,{bordered:!0,dataSource:d,renderItem:m})}),(0,i.jsx)(D.$,{isShow:t,position:"absolute"})]})}},1238:(e,t,n)=>{var i;n.d(t,{$t:()=>l,VJ:()=>r,WY:()=>s,dW:()=>i,hd:()=>a,uN:()=>o}),function(e){e.create="create",e.edit="edit"}(i||(i={}));const r=["id","slug","subDocumentIdList","title"],a="0000-00-00T00:00:00.000Z",o="image/png, image/jpeg, image/gif, image/webp",l=16e6,s=75e6},5071:(e,t,n)=>{n.d(t,{D6:()=>x,cT:()=>u,j9:()=>$,kA:()=>v,o3:()=>h,sB:()=>f,v8:()=>y});var i=n(9745),r=n(2703),a=n(8304),o=n(5220),l=n(6451),s=n(3890),d=n(5592),c=n(7644),m=n(1595),g=n(881),p=n(1238);async function u(e,t){const n=new FormData;if(e.size>=t)throw new Error(`Too big file, limit ${t/1e6}MB`);n.append("file",e);const i=await(0,l.w)(o.JW.adminFileUpload,(0,c.Dn)(),{body:n,credentials:"include",method:l.T.post}),r=(0,g.a)(i.name);switch(i.type){case d.iw.image:{const{naturalHeight:e,naturalWidth:t}=await function(e){const t=new Image;return new Promise(((n,i)=>{t.addEventListener("load",(()=>n(t)),!1),t.addEventListener("error",i,!1),t.src=e}))}(r);return{...i,height:e,width:t}}case d.iw.audio:{const{duration:e}=await function(e){const t=new Audio;return new Promise(((n,i)=>{t.addEventListener("loadedmetadata",(()=>n(t)),!1),t.addEventListener("error",i,!1),t.preload="metadata",t.src=e}))}(r);return{...i,duration:e}}case d.iw.video:{const{duration:e,videoWidth:t,videoHeight:n}=await function(e){const t=document.createElement("video");return new Promise(((n,i)=>{t.addEventListener("loadedmetadata",(()=>n(t)),!1),t.addEventListener("error",i,!1),t.preload="metadata",t.src=e}))}(r);return{...i,duration:e,height:n,width:t}}case d.iw.unknown:return i;default:throw new m.sF(i.type)}return i}function h(e){const{id:t,mode:n,savedArticleList:i}=e;return[{message:"Required!",required:!0},{message:"Please-enter-slug-properly.",validator:async(e,t)=>{if((0,r.Iu)(t)!==t)throw new Error("Slug is not formatted.")}},{message:"Please enter another slug. This slug already exists.",validator:async(e,r)=>{const a=i.filter((e=>e.slug===r)),o=a.length;if(0===o)return;if(o>=2)throw new Error("There are should be only one no non articles");const l=o>0;if(n===p.dW.create&&l)throw new Error("Use unique slug.");const[s]=a;if(n===p.dW.edit&&s.slug===r&&s.id!==t)throw new Error("Article with your slug already exists")}}]}function f(){return[{message:"Invalid HTML.",validator:async(e,t)=>{if("undefined"==typeof document)return;const n=document.createElement("div");if(n.innerHTML=t,n.innerHTML.trim()!==t.trim())throw new Error("HTML is not valid")}}]}function $(e){return(0,i.Gn)(a.$.articleEdit.path,{articleId:e})}function x(e){const t=function(e){return e.includes(".")?(e.split(".").pop()||"").toLowerCase():""}(e);return["jpg","jpeg","jfif","gif","png","webp"].includes(t)}function y(e,t){return 0===t.length?[]:e.filter((e=>!t.some((t=>t.id===e))))}function v(e){return(0,s.jX)(e).then((()=>location.reload())).catch(console.error)}},6333:(e,t,n)=>{n.d(t,{Q:()=>m});var i=n(5893),r=n(7183),a=n(8427),o=n(9250),l=n(9655),s=(n(8257),n(3145)),d=n(8304);const{Content:c}=r.default;function m(e){const{children:t}=e,n=(0,o.TH)();return(0,i.jsxs)(r.default,{children:[(0,i.jsx)(s.x,{padding:16,children:(0,i.jsx)(a.Z,{defaultSelectedKeys:[n.pathname],items:[{key:d.$.articleList.path,label:(0,i.jsx)(l.Link,{to:d.$.articleList.path,children:"List"})},{key:d.$.articleCreate.path,label:(0,i.jsx)(l.Link,{to:d.$.articleCreate.path,children:"Create"})},{key:d.$.articleTree.path,label:(0,i.jsx)(l.Link,{to:d.$.articleTree.path,children:"Tree"})}],mode:"horizontal"})}),(0,i.jsx)(s.x,{padding:16,children:(0,i.jsx)(c,{children:t})})]})}}}]);
//# sourceMappingURL=page-cms-article-tree.1e2bcc.chunk.js.map