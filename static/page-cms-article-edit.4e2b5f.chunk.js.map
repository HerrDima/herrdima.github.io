{"version":3,"file":"page-cms-article-edit.4e2b5f.chunk.js","mappings":"sRAcA,MAAM,MAACA,GAAS,IAET,SAASC,IACZ,MAAM,UAACC,IAAa,WAGhBC,QAASC,EACTC,aAAcC,EACdC,OAAQC,IACR,QACA,OAGJ,IAAAC,YAAU,KACNL,EACI,CAACM,GAAIR,GAAa,IAClB,CACIS,UAAW,EACXC,SAAU,EACVC,KAAM,CAACC,MAAO,IAErB,GACF,CAACV,EAAaF,IAEjB,MAAOC,QAASY,EAAeV,aAAcW,IAA6B,QAGxE,MAaIC,GAAoCT,aAAiB,EAAjBA,EAAmBU,KAAK,KAAM,KAExE,OAAsB,OAAlBD,GAEI,UAAC,IAAO,YACJ,UAAC,IAAQ,CAACE,SAAUb,EAAuB,WACvC,UAACN,EAAK,CAACoB,MAAO,EAAC,8BAAoBlB,MACnC,SAAC,IAAO,CAACmB,OAAQf,EAAyBgB,SAAS,cAEvD,SAAC,IAAQ,CAACH,UAAWb,EAAuB,UACxC,UAACN,EAAK,CAACoB,MAAO,EAAC,0CAAgClB,SAN1C,eAajB,UAAC,IAAO,YACJ,UAACF,EAAK,CAACoB,MAAO,EAAC,8BAAoBlB,MACnC,SAAC,IAAU,CAACqB,QAASN,EAAeO,KAAM,UAAyBC,SA9B3E,SAAwBF,GACpBR,EAAcQ,GACTG,MAAMC,IAEH,aAAgB,4BAA4B,IAE/CC,OAAOC,IACJ,WAAc,UAAUA,EAAaC,UAAU,GAE3D,KAsBQ,SAAC,IAAO,CAACT,OAAQL,EAA2BM,SAAS,YAH3CpB,EAMtB,C","sources":["webpack://typescript-project/./www/page/cms/cms-article/cms-article-edit/cms-article-edit.tsx"],"sourcesContent":["import {useEffect} from 'react';\r\nimport {Typography, message} from 'antd';\r\nimport {useParams} from 'react-router-dom';\r\n\r\nimport {CmsArticle} from '../cms-article';\r\nimport {CmsArticleModeEnum} from '../cms-article-const';\r\nimport {ArticleType} from '../../../../../server/article/article-type';\r\nimport {getArticleListPagination, postArticleUpdate} from '../../../../service/article/article-api';\r\nimport {useMakeExecutableState} from '../../../../util/function';\r\nimport {Spinner} from '../../../../layout/spinner/spinner';\r\nimport {CmsPage} from '../../layout/cms-page/cms-page';\r\nimport {PaginationResultType} from '../../../../../server/data-base/data-base-type';\r\nimport {IsRender} from '../../../../layout/is-render/is-render';\r\n\r\nconst {Title} = Typography;\r\n\r\nexport function CmsArticleEdit(): JSX.Element {\r\n    const {articleId} = useParams<'articleId'>();\r\n\r\n    const {\r\n        execute: articleById,\r\n        isInProgress: isInProgressArticleById,\r\n        result: articleByIdResult,\r\n    } = useMakeExecutableState<Parameters<typeof getArticleListPagination>, PaginationResultType<ArticleType>>(\r\n        getArticleListPagination\r\n    );\r\n\r\n    useEffect(() => {\r\n        articleById(\r\n            {id: articleId || ''},\r\n            {\r\n                pageIndex: 0,\r\n                pageSize: 1,\r\n                sort: {title: 1},\r\n            }\r\n        );\r\n    }, [articleById, articleId]);\r\n\r\n    const {execute: updateArticle, isInProgress: isInProgressUpdateArticle} = useMakeExecutableState<\r\n        Parameters<typeof postArticleUpdate>,\r\n        ArticleType\r\n    >(postArticleUpdate);\r\n\r\n    function handleOnFinish(article: ArticleType) {\r\n        updateArticle(article)\r\n            .then((savedArticle: ArticleType) => {\r\n                console.log(savedArticle);\r\n                message.success('Article has been updated!');\r\n            })\r\n            .catch((requestError: Error) => {\r\n                message.error(`ERROR: ${requestError.message}`);\r\n            });\r\n    }\r\n\r\n    const articleToEdit: ArticleType | null = articleByIdResult?.list[0] || null;\r\n\r\n    if (articleToEdit === null) {\r\n        return (\r\n            <CmsPage key=\"no-article\">\r\n                <IsRender isRender={isInProgressArticleById}>\r\n                    <Title level={2}>Edit an article: {articleId}</Title>\r\n                    <Spinner isShow={isInProgressArticleById} position=\"fixed\" />\r\n                </IsRender>\r\n                <IsRender isRender={!isInProgressArticleById}>\r\n                    <Title level={2}>Can not found article by id: {articleId}</Title>\r\n                </IsRender>\r\n            </CmsPage>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <CmsPage key={articleId}>\r\n            <Title level={2}>Edit an article: {articleId}</Title>\r\n            <CmsArticle article={articleToEdit} mode={CmsArticleModeEnum.edit} onFinish={handleOnFinish} />\r\n            <Spinner isShow={isInProgressUpdateArticle} position=\"fixed\" />\r\n        </CmsPage>\r\n    );\r\n}\r\n"],"names":["Title","CmsArticleEdit","articleId","execute","articleById","isInProgress","isInProgressArticleById","result","articleByIdResult","useEffect","id","pageIndex","pageSize","sort","title","updateArticle","isInProgressUpdateArticle","articleToEdit","list","isRender","level","isShow","position","article","mode","onFinish","then","savedArticle","catch","requestError","message"],"sourceRoot":""}