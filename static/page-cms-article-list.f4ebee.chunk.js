"use strict";(self.webpackChunktypescript_project=self.webpackChunktypescript_project||[]).push([[132],{7687:(e,t,r)=>{r.d(t,{x:()=>a});var n=r(5893);function i(e){if("number"==typeof e)return[e,e,e,e];if(!Array.isArray(e))return[0,0,0,0];switch(e.length){case 0:return[0,0,0,0];case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return[e[0],e[1],e[2],e[3]];default:return console.error("makeCssArray: too big array"),[e[0],e[1],e[2],e[3]]}}function a(e){const{tagName:t="div",children:r,margin:a,padding:d,width:o,height:s,boxSizing:l,backgroundColor:c,display:u}=e,[g,p,h,f,m,w,y,x]=[...i(a),...i(d)].map((e=>`${e}px`)),S={backgroundColor:c,boxSizing:l,display:u,height:s,marginBottom:h,marginLeft:f,marginRight:p,marginTop:g,paddingBottom:y,paddingLeft:x,paddingRight:w,paddingTop:m,width:o};return(0,n.jsx)(t,{style:S,children:r})}},7112:(e,t,r)=>{r.r(t),r.d(t,{CmsArticleList:()=>T});var n,i=r(5893),a=r(7294),d=r(7625),o=r(2101),s=r(4154),l=r(6479),c=r(2137),u=r(2787),g=r(6570),p=r(9655),h=r(2171),f=r(1454),m=r(4858),w=r(4564),y=r(6290);function x(e){const{setSearchedColumn:t,setSearchText:r}=e;return[{dataIndex:"title",defaultSortOrder:n.ascend,filterDropdown:()=>(0,i.jsx)(u.Z,{onInput:e=>{t("title"),r(e.currentTarget.value.trim())},placeholder:"Search..."},"title"),filterIcon:(0,i.jsx)(g.Z,{}),key:"title",render:(e,t)=>(0,i.jsx)(p.Link,{to:(0,w._)(t.slug),children:e},t.id),sorter:()=>0,title:"Title"},{dataIndex:"slug",defaultSortOrder:null,filterDropdown:()=>(0,i.jsx)(u.Z,{onInput:e=>{t("slug"),r(e.currentTarget.value)},placeholder:"Search..."},"slug"),filterIcon:(0,i.jsx)(g.Z,{}),key:"slug",render:(e,t)=>(0,i.jsx)(p.Link,{to:(0,h.j9)(t.id),children:e},t.id),sorter:()=>0,title:"Slug/edit"},{dataIndex:"articleType",defaultSortOrder:null,key:"articleType",sorter:()=>0,title:"Type"},{align:"center",dataIndex:"isActive",defaultSortOrder:null,key:"isActive",render:e=>(0,f.pA)(e),sorter:()=>0,title:"Is active"},{align:"center",dataIndex:"titleImage",defaultSortOrder:null,key:"titleImage",render:e=>(0,i.jsx)("img",{alt:e.name,height:"64px",src:(0,y.s)(e.name,{height:64,width:64}),style:{objectFit:"contain"},width:"64px"}),sorter:()=>0,title:"Image"},{align:"right",dataIndex:"createdDate",defaultSortOrder:null,key:"createdDate",render:m.aS,sorter:()=>0,title:"Created UTC-0",width:120},{align:"right",dataIndex:"updatedDate",defaultSortOrder:null,key:"updatedDate",render:m.aS,sorter:()=>0,title:"Updated UTC-0",width:120},{align:"right",dataIndex:"publishDate",defaultSortOrder:null,key:"publishDate",render:m.aS,sorter:()=>0,title:"Publish UTC-0",width:120}]}!function(e){e.ascend="ascend",e.descend="descend"}(n||(n={}));const S=["articleType","createdDate","id","isActive","publishDate","slug","title","titleImage","updatedDate"],{Title:v}=d.Z;function T(){const[e,t]=(0,a.useState)("title"),[r,d]=(0,a.useState)(""),{execute:u,result:g,isInProgress:p}=(0,s.Od)(l.Qy),[h,f]=(0,a.useState)({pageConfig:{pageIndex:0,pageSize:10,sort:{title:1}},query:{}});return(0,a.useEffect)((()=>{u(h.query,h.pageConfig,S)}),[u,h]),(0,a.useEffect)((()=>{f((t=>{const i=String({...t.pageConfig.sort}[String(e)])===n.descend?-1:1,{pageSize:a}=t.pageConfig;return{pageConfig:{pageIndex:0,pageSize:a,sort:{[String(e)]:i}},query:{[e]:new RegExp(r,"i").toString()}}}))}),[e,r]),(0,i.jsxs)(c.Q,{children:[(0,i.jsx)(v,{level:2,children:"Article list"}),(0,i.jsx)(o.Z,{columns:x({setSearchText:d,setSearchedColumn:t}),dataSource:(null==g?void 0:g.list)||[],loading:p,onChange:function(t,i,a,d){const o=Array.isArray(a)?a[0]:a;if(!o)return void console.warn("handleTableChange - NO firstSorter");const{column:s,order:l,field:c,columnKey:u}=o,g=l===n.descend?-1:1,p=(t.current||1)-1,h=t.pageSize||10;f((()=>({pageConfig:{pageIndex:p,pageSize:h,sort:{[String(c)]:g}},query:{[e]:new RegExp(r,"i").toString()}})))},pagination:{current:h.pageConfig.pageIndex+1,defaultPageSize:10,hideOnSinglePage:!1,pageSize:h.pageConfig.pageSize,pageSizeOptions:[10,50,100,500,1e3,2e3,5e3],showSizeChanger:!0,total:(null==g?void 0:g.totalItemCount)||0},rowKey:"id"})]})}},2780:(e,t,r)=>{var n;r.d(t,{$t:()=>o,VJ:()=>i,WY:()=>s,dW:()=>n,hd:()=>a,uN:()=>d}),function(e){e.create="create",e.edit="edit"}(n||(n={}));const i=["id","slug","subDocumentIdList","title"],a="0000-00-00T00:00:00.000Z",d="image/png, image/jpeg, image/gif, image/webp",o=16e6,s=75e6},2171:(e,t,r)=>{r.d(t,{D6:()=>y,cT:()=>h,j9:()=>w,kA:()=>S,o3:()=>f,sB:()=>m,v8:()=>x});var n=r(4644),i=r(3685),a=r(4057),d=r(5181),o=r(6661),s=r(6479),l=r(6163),c=r(874),u=r(4756),g=r(6290),p=r(2780);async function h(e,t){const r=new FormData;if(e.size>=t)throw new Error(`Too big file, limit ${t/1e6}MB`);r.append("file",e);const n=await(0,o.w)(d.JW.adminFileUpload,(0,c.Dn)(),{body:r,credentials:"include",method:o.T.post}),i=(0,g.a)(n.name);switch(n.type){case l.iw.image:{const{naturalHeight:e,naturalWidth:t}=await function(e){const t=new Image;return new Promise(((r,n)=>{t.addEventListener("load",(()=>r(t)),!1),t.addEventListener("error",n,!1),t.src=e}))}(i);return{...n,height:e,width:t}}case l.iw.audio:{const{duration:e}=await function(e){const t=new Audio;return new Promise(((r,n)=>{t.addEventListener("loadedmetadata",(()=>r(t)),!1),t.addEventListener("error",n,!1),t.preload="metadata",t.src=e}))}(i);return{...n,duration:e}}case l.iw.video:{const{duration:e,videoWidth:t,videoHeight:r}=await function(e){const t=document.createElement("video");return new Promise(((r,n)=>{t.addEventListener("loadedmetadata",(()=>r(t)),!1),t.addEventListener("error",n,!1),t.preload="metadata",t.src=e}))}(i);return{...n,duration:e,height:r,width:t}}case l.iw.unknown:return n;default:throw new u.sF(n.type)}return n}function f(e){const{id:t,mode:r,savedArticleList:n}=e;return[{message:"Required!",required:!0},{message:"Please-enter-slug-properly.",validator:async(e,t)=>{if((0,i.Iu)(t)!==t)throw new Error("Slug is not formatted.")}},{message:"Please enter another slug. This slug already exists.",validator:async(e,i)=>{const a=n.filter((e=>e.slug===i)),d=a.length;if(0===d)return;if(d>=2)throw new Error("There are should be only one no non articles");const o=d>0;if(r===p.dW.create&&o)throw new Error("Use unique slug.");const[s]=a;if(r===p.dW.edit&&s.slug===i&&s.id!==t)throw new Error("Article with your slug already exists")}}]}function m(){return[{message:"Invalid HTML.",validator:async(e,t)=>{if("undefined"==typeof document)return;const r=document.createElement("div");if(r.innerHTML=t,r.innerHTML.trim()!==t.trim())throw new Error("HTML is not valid")}}]}function w(e){return(0,n.Gn)(a.$.articleEdit.path,{articleId:e})}function y(e){const t=function(e){return e.includes(".")?(e.split(".").pop()||"").toLowerCase():""}(e);return["jpg","jpeg","jfif","gif","png","webp"].includes(t)}function x(e,t){return 0===t.length?[]:e.filter((e=>!t.some((t=>t.id===e))))}function S(e){return(0,s.jX)(e).then((()=>location.reload())).catch(console.error)}},2137:(e,t,r)=>{r.d(t,{Q:()=>u});var n=r(5893),i=r(7183),a=r(6578),d=r(9250),o=r(9655),s=(r(8257),r(7687)),l=r(4057);const{Content:c}=i.Z;function u(e){const{children:t}=e,r=(0,d.TH)();return(0,n.jsxs)(i.Z,{children:[(0,n.jsx)(s.x,{padding:16,children:(0,n.jsx)(a.Z,{defaultSelectedKeys:[r.pathname],items:[{key:l.$.articleList.path,label:(0,n.jsx)(o.Link,{to:l.$.articleList.path,children:"List"})},{key:l.$.articleCreate.path,label:(0,n.jsx)(o.Link,{to:l.$.articleCreate.path,children:"Create"})},{key:l.$.articleTree.path,label:(0,n.jsx)(o.Link,{to:l.$.articleTree.path,children:"Tree"})}],mode:"horizontal"})}),(0,n.jsx)(s.x,{padding:16,children:(0,n.jsx)(c,{children:t})})]})}}}]);
//# sourceMappingURL=page-cms-article-list.f4ebee.chunk.js.map