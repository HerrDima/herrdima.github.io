"use strict";(self.webpackChunkmin_svenska=self.webpackChunkmin_svenska||[]).push([[702],{7687:(e,t,n)=>{n.d(t,{x:()=>a});var i=n(5893);function r(e){if("number"==typeof e)return[e,e,e,e];if(!Array.isArray(e))return[0,0,0,0];switch(e.length){case 0:return[0,0,0,0];case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return[e[0],e[1],e[2],e[3]];default:return console.error("makeCssArray: too big array"),[e[0],e[1],e[2],e[3]]}}function a(e){const{tagName:t="div",children:n,margin:a,padding:o,width:l,height:s,boxSizing:c,backgroundColor:d,display:m}=e,[g,p,u,h,f,$,x,y]=[...r(a),...r(o)].map((e=>`${e}px`)),b={backgroundColor:d,boxSizing:c,display:m,height:s,marginBottom:u,marginLeft:h,marginRight:p,marginTop:g,paddingBottom:x,paddingLeft:y,paddingRight:$,paddingTop:f,width:l};return(0,i.jsx)(t,{style:b,children:n})}},2120:(e,t,n)=>{n.r(t),n.d(t,{CmsArticleTree:()=>ee});var i=n(5893),r=n(7294),a=n(2124),o=n(6622),l=n(4184),s=n.n(l),c=n(3124),d=n(8258),m=n(2820),g=n(5378),p=n(1771),u=n(2507),h=n(4443),f=n(8780),$=n(1584),x=n(6159),y=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const b=(e,t)=>{var{prefixCls:n,children:i,actions:a,extra:o,className:l,colStyle:d}=e,m=y(e,["prefixCls","children","actions","extra","className","colStyle"]);const{grid:g,itemLayout:p}=(0,r.useContext)(T),{getPrefixCls:u}=(0,r.useContext)(c.E_),h=u("list",n),f=a&&a.length>0&&r.createElement("ul",{className:`${h}-item-action`,key:"actions"},a.map(((e,t)=>r.createElement("li",{key:`${h}-item-action-${t}`},e,t!==a.length-1&&r.createElement("em",{className:`${h}-item-action-split`}))))),b=g?"div":"li",v=r.createElement(b,Object.assign({},m,g?{}:{ref:t},{className:s()(`${h}-item`,{[`${h}-item-no-flex`]:!("vertical"===p?o:!(()=>{let e;return r.Children.forEach(i,(t=>{"string"==typeof t&&(e=!0)})),e&&r.Children.count(i)>1})())},l)}),"vertical"===p&&o?[r.createElement("div",{className:`${h}-item-main`,key:"content"},i,f),r.createElement("div",{className:`${h}-item-extra`,key:"extra"},o)]:[i,f,(0,x.Tm)(o,{key:"extra"})]);return g?r.createElement($.Z,{ref:t,flex:1,style:d},v):v},v=(0,r.forwardRef)(b);v.Meta=e=>{var{prefixCls:t,className:n,avatar:i,title:a,description:o}=e,l=y(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:d}=(0,r.useContext)(c.E_),m=d("list",t),g=s()(`${m}-item-meta`,n),p=r.createElement("div",{className:`${m}-item-meta-content`},a&&r.createElement("h4",{className:`${m}-item-meta-title`},a),o&&r.createElement("div",{className:`${m}-item-meta-description`},o));return r.createElement("div",Object.assign({},l,{className:g}),i&&r.createElement("div",{className:`${m}-item-meta-avatar`},i),(a||o)&&p)};const S=v;var j=n(7968),w=n(5503),E=n(4747);const k=e=>{const{listBorderedCls:t,componentCls:n,paddingLG:i,margin:r,padding:a,listItemPaddingSM:o,marginLG:l,borderRadiusLG:s}=e;return{[`${t}`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:s,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:i},[`${n}-pagination`]:{margin:`${r}px ${l}px`}},[`${t}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:o}},[`${t}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:`${a}px ${i}px`}}}},L=e=>{const{componentCls:t,screenSM:n,screenMD:i,marginLG:r,marginSM:a,margin:o}=e;return{[`@media screen and (max-width:${i})`]:{[`${t}`]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:r}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:r}}}},[`@media screen and (max-width: ${n})`]:{[`${t}`]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:a}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${o}px`}}}}}},C=e=>{const{componentCls:t,antCls:n,controlHeight:i,minHeight:r,paddingSM:a,marginLG:o,padding:l,listItemPadding:s,colorPrimary:c,listItemPaddingSM:d,listItemPaddingLG:m,paddingXS:g,margin:p,colorText:u,colorTextDescription:h,motionDurationSlow:f,lineWidth:$}=e;return{[`${t}`]:Object.assign(Object.assign({},(0,E.Wf)(e)),{position:"relative","*":{outline:"none"},[`${t}-header, ${t}-footer`]:{background:"transparent",paddingBlock:a},[`${t}-pagination`]:{marginBlockStart:o,textAlign:"end",[`${n}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:r,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:s,color:u,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:l},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:u},[`${t}-item-meta-title`]:{marginBottom:e.marginXXS,color:u,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:u,transition:`all ${f}`,"&:hover":{color:c}}},[`${t}-item-meta-description`]:{color:h,fontSize:e.fontSize,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${g}px`,color:h,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:$,height:Math.ceil(e.fontSize*e.lineHeight)-2*e.marginXXS,transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${l}px 0`,color:h,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:l,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${n}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:p,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:o},[`${t}-item-meta`]:{marginBlockEnd:l,[`${t}-item-meta-title`]:{marginBlockEnd:a,color:u,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:l,marginInlineStart:"auto","> li":{padding:`0 ${l}px`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:i},[`${t}-split${t}-something-after-last-item ${n}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:m},[`${t}-sm ${t}-item`]:{padding:d},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},I=(0,j.Z)("List",(e=>{const t=(0,w.TS)(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG,listItemPadding:`${e.paddingContentVertical}px ${e.paddingContentHorizontalLG}px`,listItemPaddingSM:`${e.paddingContentVerticalSM}px ${e.paddingContentHorizontal}px`,listItemPaddingLG:`${e.paddingContentVerticalLG}px ${e.paddingContentHorizontalLG}px`});return[C(t),k(t),L(t)]}),{contentWidth:220}),T=r.createContext({});function z(e){var{pagination:t=!1,prefixCls:n,bordered:i=!1,split:a=!0,className:l,children:$,itemLayout:x,loadMore:y,grid:b,dataSource:v=[],size:S,header:j,footer:w,loading:E=!1,rowKey:k,renderItem:L,locale:C}=e,z=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const O=t&&"object"==typeof t?t:{},[N,P]=r.useState(O.defaultCurrent||1),[A,H]=r.useState(O.defaultPageSize||10),{getPrefixCls:Z,renderEmpty:M,direction:W}=r.useContext(c.E_),B=e=>(n,i)=>{P(n),H(i),t&&t[e]&&t[e](n,i)},D=B("onChange"),G=B("onShowSizeChange"),R=Z("list",n),[X,_]=I(R);let F=E;"boolean"==typeof F&&(F={spinning:F});const V=F&&F.spinning;let q="";switch(S){case"large":q="lg";break;case"small":q="sm"}const J=s()(R,{[`${R}-vertical`]:"vertical"===x,[`${R}-${q}`]:q,[`${R}-split`]:a,[`${R}-bordered`]:i,[`${R}-loading`]:V,[`${R}-grid`]:!!b,[`${R}-something-after-last-item`]:!!(y||t||w),[`${R}-rtl`]:"rtl"===W},l,_),K=(0,f.Z)({current:1,total:0},{total:v.length,current:N,pageSize:A},t||{}),Q=Math.ceil(K.total/K.pageSize);K.current>Q&&(K.current=Q);const U=t?r.createElement("div",{className:`${R}-pagination`},r.createElement(p.Z,Object.assign({},K,{onChange:D,onShowSizeChange:G}))):null;let Y=(0,o.Z)(v);t&&v.length>(K.current-1)*K.pageSize&&(Y=(0,o.Z)(v).splice((K.current-1)*K.pageSize,K.pageSize));const ee=Object.keys(b||{}).some((e=>["xs","sm","md","lg","xl","xxl"].includes(e))),te=(0,g.Z)(ee),ne=r.useMemo((()=>{for(let e=0;e<h.c.length;e+=1){const t=h.c[e];if(te[t])return t}}),[te]),ie=r.useMemo((()=>{if(!b)return;const e=ne&&b[ne]?b[ne]:b.column;return e?{width:100/e+"%",maxWidth:100/e+"%"}:void 0}),[null==b?void 0:b.column,ne]);let re=V&&r.createElement("div",{style:{minHeight:53}});if(Y.length>0){const e=Y.map(((e,t)=>((e,t)=>{if(!L)return null;let n;return n="function"==typeof k?k(e):k?e[k]:e.key,n||(n=`list-item-${t}`),r.createElement(r.Fragment,{key:n},L(e,t))})(e,t)));re=b?r.createElement(m.Z,{gutter:b.gutter},r.Children.map(e,(e=>r.createElement("div",{key:null==e?void 0:e.key,style:ie},e)))):r.createElement("ul",{className:`${R}-items`},e)}else $||V||(re=r.createElement("div",{className:`${R}-empty-text`},C&&C.emptyText||(null==M?void 0:M("List"))||r.createElement(d.Z,{componentName:"List"})));const ae=K.position||"bottom",oe=r.useMemo((()=>({grid:b,itemLayout:x})),[JSON.stringify(b),x]);return X(r.createElement(T.Provider,{value:oe},r.createElement("div",Object.assign({className:J},z),("top"===ae||"both"===ae)&&U,j&&r.createElement("div",{className:`${R}-header`},j),r.createElement(u.Z,Object.assign({},F),re,$),w&&r.createElement("div",{className:`${R}-footer`},w),y||("bottom"===ae||"both"===ae)&&U)))}T.Consumer,z.Item=S;const O=z;var N=n(9477),P=n(5460),A=n(4753),H=n(7254),Z=n(9655),M=n(2137),W=n(4154),B=n(6479),D=n(7579),G=n(7687),R=n(1454),X=n(2171),_=n(4564);const F=["articleType","id","isActive","slug","subDocumentIdList","title"];var V=n(3624);const{Text:q}=a.Z;function J(e,t){return e.find((e=>e.id===t))||null}function K(e,t,n){if(0===n)return console.error("[ERROR]: populateChildren: limit exceeded"),[];const r=J(t,e);if(!r)return[];const{subDocumentIdList:a}=r;return a.map((e=>{const r=J(t,e),a=(0,X.j9)(e);if(!r)return{key:e,title:(0,i.jsx)(Z.Link,{to:a,children:(0,i.jsxs)(q,{type:"danger",children:["[ERROR]: can NOT find article by id: ",e]})})};const{title:o,slug:l,isActive:s,articleType:c}=r,d=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z.Link,{to:(0,_._)(l),children:o})," | ",(0,i.jsx)(Z.Link,{to:a,children:l})," | ",(0,i.jsxs)(q,{children:[c," ",(0,R.pA)(s)]})]});return{children:K(e,t,n-1),key:e,title:d}}))}const{Title:Q,Text:U}=a.Z,{Item:Y}=O;function ee(){const{execute:e,isInProgress:t}=(0,W.Od)(B.Qy),[n,a]=(0,r.useState)([]);(0,r.useEffect)((()=>{e({},{pageIndex:0,pageSize:0,sort:{title:1}},F).then((e=>a(e.list))).catch((e=>{N.ZP.error("Can not fetch article list.")}))}),[e]);const o=(l=n,{children:K(V.Z,l,10),key:V.Z,title:(0,i.jsx)(Z.Link,{to:(0,X.j9)(V.Z),children:V.Z})});var l;const s=function(e){return e.filter((t=>!e.some((e=>e.subDocumentIdList.includes(t.id)))))}(n),c=function(e){return e.filter((t=>{const{subDocumentIdList:n}=t;return n.some((t=>!J(e,t)))}))}(n),d=(0,r.useCallback)(((e,t)=>{const{title:n,slug:r,isActive:a,articleType:o,id:l}=e;return(0,i.jsxs)(Y,{children:[(0,i.jsxs)(U,{children:[t+1,". "]}),(0,i.jsx)(Z.Link,{to:(0,_._)(r),children:n})," | ",(0,i.jsx)(Z.Link,{to:(0,X.j9)(l),children:r})," | ",(0,i.jsxs)(U,{children:[o," ",(0,R.pA)(a)]})]})}),[]),m=(0,r.useCallback)(((e,t)=>{const{title:r,slug:a,isActive:o,articleType:l,id:s,subDocumentIdList:c}=e,d=c.filter((e=>!J(n,e))).join(", ");return(0,i.jsxs)(Y,{children:[(0,i.jsxs)(U,{children:[t+1,". "]}),(0,i.jsx)(Z.Link,{to:(0,_._)(a),children:r})," | ",(0,i.jsx)(Z.Link,{to:(0,X.j9)(s),children:a})," | ",(0,i.jsxs)(U,{children:[l," ",(0,R.pA)(o)]})," | ",(0,i.jsxs)(U,{type:"danger",children:["Ids: ",d]})]})}),[n]);return(0,i.jsxs)(M.Q,{children:[(0,i.jsx)(Q,{level:2,children:"Article tree"}),(0,i.jsxs)(P.Z,{orientation:"left",children:["Articles in a tree, total (include non-parents): ",n.length]}),(0,i.jsx)(A.Z,{autoExpandParent:!0,defaultExpandAll:!0,showLine:!0,switcherIcon:(0,i.jsx)(H.Z,{}),treeData:[o]}),(0,i.jsxs)(P.Z,{orientation:"left",children:["Articles without parent, total: ",s.length]}),(0,i.jsx)(G.x,{backgroundColor:"#fff",children:(0,i.jsx)(O,{bordered:!0,dataSource:s,renderItem:d})}),(0,i.jsxs)(P.Z,{orientation:"left",children:["Articles with lost children, total: ",c.length]}),(0,i.jsx)(G.x,{backgroundColor:"#fff",children:(0,i.jsx)(O,{bordered:!0,dataSource:c,renderItem:m})}),(0,i.jsx)(D.$,{isShow:t,position:"absolute"})]})}},2780:(e,t,n)=>{var i;n.d(t,{$t:()=>l,VJ:()=>r,WY:()=>s,dW:()=>i,hd:()=>a,uN:()=>o}),function(e){e.create="create",e.edit="edit"}(i||(i={}));const r=["id","slug","subDocumentIdList","title"],a="0000-00-00T00:00:00.000Z",o="image/png, image/jpeg, image/gif, image/webp",l=16e6,s=75e6},2171:(e,t,n)=>{n.d(t,{D6:()=>x,cT:()=>u,j9:()=>$,kA:()=>b,o3:()=>h,sB:()=>f,v8:()=>y});var i=n(4644),r=n(3685),a=n(4057),o=n(5181),l=n(6661),s=n(6479),c=n(6163),d=n(874),m=n(4756),g=n(6290),p=n(2780);async function u(e,t){const n=new FormData;if(e.size>=t)throw new Error(`Too big file, limit ${t/1e6}MB`);n.append("file",e);const i=await(0,l.w)(o.JW.adminFileUpload,(0,d.Dn)(),{body:n,credentials:"include",method:l.T.post}),r=(0,g.a)(i.name);switch(i.type){case c.iw.image:{const{naturalHeight:e,naturalWidth:t}=await function(e){const t=new Image;return new Promise(((n,i)=>{t.addEventListener("load",(()=>n(t)),!1),t.addEventListener("error",i,!1),t.src=e}))}(r);return{...i,height:e,width:t}}case c.iw.audio:{const{duration:e}=await function(e){const t=new Audio;return new Promise(((n,i)=>{t.addEventListener("loadedmetadata",(()=>n(t)),!1),t.addEventListener("error",i,!1),t.preload="metadata",t.src=e}))}(r);return{...i,duration:e}}case c.iw.video:{const{duration:e,videoWidth:t,videoHeight:n}=await function(e){const t=document.createElement("video");return new Promise(((n,i)=>{t.addEventListener("loadedmetadata",(()=>n(t)),!1),t.addEventListener("error",i,!1),t.preload="metadata",t.src=e}))}(r);return{...i,duration:e,height:n,width:t}}case c.iw.unknown:return i;default:throw new m.sF(i.type)}return i}function h(e){const{id:t,mode:n,savedArticleList:i}=e;return[{message:"Required!",required:!0},{message:"Please-enter-slug-properly.",validator:async(e,t)=>{if((0,r.Iu)(t)!==t)throw new Error("Slug is not formatted.")}},{message:"Please enter another slug. This slug already exists.",validator:async(e,r)=>{const a=i.filter((e=>e.slug===r)),o=a.length;if(0===o)return;if(o>=2)throw new Error("There are should be only one no non articles");const l=o>0;if(n===p.dW.create&&l)throw new Error("Use unique slug.");const[s]=a;if(n===p.dW.edit&&s.slug===r&&s.id!==t)throw new Error("Article with your slug already exists")}}]}function f(){return[{message:"Invalid HTML.",validator:async(e,t)=>{if("undefined"==typeof document)return;const n=document.createElement("div");if(n.innerHTML=t,n.innerHTML.trim()!==t.trim())throw new Error("HTML is not valid")}}]}function $(e){return(0,i.Gn)(a.$.articleEdit.path,{articleId:e})}function x(e){const t=function(e){return e.includes(".")?(e.split(".").pop()||"").toLowerCase():""}(e);return["jpg","jpeg","jfif","gif","png","webp"].includes(t)}function y(e,t){return 0===t.length?[]:e.filter((e=>!t.some((t=>t.id===e))))}function b(e){return(0,s.jX)(e).then((()=>location.reload())).catch(console.error)}},2137:(e,t,n)=>{n.d(t,{Q:()=>m});var i=n(5893),r=n(7183),a=n(6578),o=n(9250),l=n(9655),s=(n(8257),n(7687)),c=n(4057);const{Content:d}=r.Z;function m(e){const{children:t}=e,n=(0,o.TH)();return(0,i.jsxs)(r.Z,{children:[(0,i.jsx)(s.x,{padding:16,children:(0,i.jsx)(a.Z,{defaultSelectedKeys:[n.pathname],items:[{key:c.$.articleList.path,label:(0,i.jsx)(l.Link,{to:c.$.articleList.path,children:"List"})},{key:c.$.articleCreate.path,label:(0,i.jsx)(l.Link,{to:c.$.articleCreate.path,children:"Create"})},{key:c.$.articleTree.path,label:(0,i.jsx)(l.Link,{to:c.$.articleTree.path,children:"Tree"})}],mode:"horizontal"})}),(0,i.jsx)(s.x,{padding:16,children:(0,i.jsx)(d,{children:t})})]})}}}]);
//# sourceMappingURL=page-cms-article-tree.bb63ef.chunk.js.map